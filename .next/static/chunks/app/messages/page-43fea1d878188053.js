(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9451],{5626:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5702:(e,s,r)=>{"use strict";r.d(s,{tU:()=>C,av:()=>E,j7:()=>M,Xi:()=>I});var a=r(5155),t=r(2115),i=r(2556),n=r(3468),o=r(2431),l=r(6842),d=r(7602),c=r(6218),m=r(3558),u=r(8946),x="Tabs",[f,h]=(0,n.A)(x,[o.RG]),p=(0,o.RG)(),[v,b]=f(x),g=t.forwardRef((e,s)=>{let{__scopeTabs:r,value:t,onValueChange:i,defaultValue:n,orientation:o="horizontal",dir:l,activationMode:f="automatic",...h}=e,p=(0,c.jH)(l),[b,g]=(0,m.i)({prop:t,onChange:i,defaultProp:null!=n?n:"",caller:x});return(0,a.jsx)(v,{scope:r,baseId:(0,u.B)(),value:b,onValueChange:g,orientation:o,dir:p,activationMode:f,children:(0,a.jsx)(d.sG.div,{dir:p,"data-orientation":o,...h,ref:s})})});g.displayName=x;var j="TabsList",y=t.forwardRef((e,s)=>{let{__scopeTabs:r,loop:t=!0,...i}=e,n=b(j,r),l=p(r);return(0,a.jsx)(o.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:t,children:(0,a.jsx)(d.sG.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});y.displayName=j;var N="TabsTrigger",w=t.forwardRef((e,s)=>{let{__scopeTabs:r,value:t,disabled:n=!1,...l}=e,c=b(N,r),m=p(r),u=_(c.baseId,t),x=A(c.baseId,t),f=t===c.value;return(0,a.jsx)(o.q7,{asChild:!0,...m,focusable:!n,active:f,children:(0,a.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":x,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:s,onMouseDown:(0,i.mK)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(t)}),onKeyDown:(0,i.mK)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(t)}),onFocus:(0,i.mK)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||n||!e||c.onValueChange(t)})})})});w.displayName=N;var k="TabsContent",S=t.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,forceMount:n,children:o,...c}=e,m=b(k,r),u=_(m.baseId,i),x=A(m.baseId,i),f=i===m.value,h=t.useRef(f);return t.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(l.C,{present:n||f,children:r=>{let{present:t}=r;return(0,a.jsx)(d.sG.div,{"data-state":f?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:x,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0},children:t&&o})}})});function _(e,s){return"".concat(e,"-trigger-").concat(s)}function A(e,s){return"".concat(e,"-content-").concat(s)}S.displayName=k;var D=r(4269);let C=g,M=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(y,{ref:s,className:(0,D.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});M.displayName=y.displayName;let I=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(w,{ref:s,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});I.displayName=w.displayName;let E=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(S,{ref:s,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});E.displayName=S.displayName},6100:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>W});var a=r(5155),t=r(2115),i=r(6072),n=r(5897),o=r(3998),l=r(5142),d=r(7037),c=r(1120),m=r(4269),u=r(6766),x=r(6651),f=r(5626),h=r(7772),p=r(5299),v=r(725),b=r(1847);let g=(0,b.A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),j=(0,b.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),y=(0,b.A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),N=(0,b.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var w=r(3664),k=r(6633),S=r(3298),_=r(243),A=r(5702),D=r(4585),C=r(9708);let M=[{id:"mock-story-1",participants:["user-uid","producer_universal_uid"],participantDetails:{"user-uid":{name:"You",avatar:"",username:"you"},producer_universal_uid:{name:"Universal Pictures",username:"universal",avatar:"https://pbs.twimg.com/profile_images/1473431189494210561/hQp0S3b5_400x400.jpg"}},lastMessage:'**New Story Submission for "High-Concept Sci-Fi Thriller"**',timestamp:C.Dc.fromMillis(Date.now()-1728e5),unreadCounts:{"user-uid":0,producer_universal_uid:1}},{id:"mock-story-2",participants:["user-uid","producer_a24_uid"],participantDetails:{"user-uid":{name:"You",avatar:"",username:"you"},producer_a24_uid:{name:"A24",username:"a24",avatar:"https://pbs.twimg.com/profile_images/1473431189494210561/hQp0S3b5_400x400.jpg"}},lastMessage:'**New Story Submission for "Quirky Indie Comedy"**',timestamp:C.Dc.fromMillis(Date.now()-432e6),unreadCounts:{"user-uid":0,producer_a24_uid:1}}],I={"mock-story-1":[{id:"msg-1",conversationId:"mock-story-1",senderId:"user-uid",text:'**New Story Submission for "High-Concept Sci-Fi Thriller"**\n\n**Writer:** Alex Writer (alex@example.com)\n**Location:** Los Angeles, CA\n\n---\n**Story Category:** Sci-Fi\n\n**Previous Works:**\nShort film "Echoes" won at LA Film Fest.\n\n---\n**Story Content:**\nIn a future where dreams are recorded, a cynical detective hunts a memory thief, only to discover the stolen dreams hold the key to his own forgotten past. He must navigate a surreal landscape of subconscious minds before his own identity unravels completely.',timestamp:C.Dc.fromMillis(Date.now()-1728e5)},{id:"msg-2",conversationId:"mock-story-1",senderId:"producer_universal_uid",text:"Hi Alex, thanks for the submission. The logline is intriguing. We'll review it and get back to you within 2-3 weeks.",timestamp:C.Dc.fromMillis(Date.now()-864e5)}],"mock-story-2":[{id:"msg-3",conversationId:"mock-story-2",senderId:"user-uid",text:'**New Story Submission for "Quirky Indie Comedy"**\n\n**Writer:** Sam Script (sam@example.com)\n**Location:** Austin, TX\n\n---\n**Story Category:** Comedy\n\n**Previous Works:**\nN/A\n\n---\n**Story Content:**\nA struggling musician inherits a failing pet psychic business. To save it, she must learn to "communicate" with animals, leading to hilarious and heartwarming consultations with the town\'s eccentric pet owners.',timestamp:C.Dc.fromMillis(Date.now()-432e6)}]},E=[{id:"mock-convo-1",participants:["user-uid","friend_1_uid"],participantDetails:{"user-uid":{name:"You",avatar:"",username:"you"},friend_1_uid:{name:"Jane Doe",username:"janedoe",avatar:"https://picsum.photos/seed/janedoe/200/200"}},lastMessage:"Sounds good! See you then.",timestamp:C.Dc.fromMillis(Date.now()-864e5),unreadCounts:{"user-uid":2,friend_1_uid:0}},{id:"mock-convo-2",participants:["user-uid","verified_1_uid"],participantDetails:{"user-uid":{name:"You",avatar:"",username:"you"},verified_1_uid:{name:"A24",username:"a24",avatar:"https://pbs.twimg.com/profile_images/1473431189494210561/hQp0S3b5_400x400.jpg"}},lastMessage:"We received your submission and our team will review it shortly.",timestamp:C.Dc.fromMillis(Date.now()-2592e5),unreadCounts:{"user-uid":0,verified_1_uid:0}}],F={"mock-convo-1":[{id:"msg-c1-1",conversationId:"mock-convo-1",senderId:"friend_1_uid",text:"Hey! Are we still on for the screening tomorrow night?",timestamp:C.Dc.fromMillis(Date.now()-864e5*1.1)},{id:"msg-c1-2",conversationId:"mock-convo-1",senderId:"user-uid",text:"Absolutely! I've already got the tickets.",timestamp:C.Dc.fromMillis(Date.now()-9072e4)},{id:"msg-c1-3",conversationId:"mock-convo-1",senderId:"friend_1_uid",text:"Awesome! I'm bringing popcorn.",timestamp:C.Dc.fromMillis(Date.now()-864e5)},{id:"msg-c1-4",conversationId:"mock-convo-1",senderId:"friend_1_uid",text:"Sounds good! See you then.",timestamp:C.Dc.fromMillis(Date.now()-864e5)}],"mock-convo-2":[{id:"msg-c2-1",conversationId:"mock-convo-2",senderId:"verified_1_uid",text:"We received your submission and our team will review it shortly.",timestamp:C.Dc.fromMillis(Date.now()-2592e5)}]};function W(){let{user:e}=(0,k.A)(),[s,r]=(0,t.useState)([]),[b,W]=(0,t.useState)(null),[R,z]=(0,t.useState)([]),[K,T]=(0,t.useState)(""),[L,H]=(0,t.useState)(!0),[V,$]=(0,t.useState)(!1),[P,Q]=(0,t.useState)(!1),q=(0,t.useRef)(null),[B,G]=(0,t.useState)("messages"),[J,O]=(0,t.useState)([]),[U,X]=(0,t.useState)(null),[Y,Z]=(0,t.useState)([]),[ee,es]=(0,t.useState)(!0),[er,ea]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!e){H(!1),es(!1),r(E),O(M);return}H(!0);let s=(0,C.P)((0,C.rJ)(D.db,"conversations"),(0,C._M)("participants","array-contains",e.uid),(0,C.My)("timestamp","desc")),a=(0,C.aQ)(s,e=>{let s=e.docs.map(e=>({...e.data(),id:e.id})),a=s.length>0,t=a?s.filter(e=>!e.lastMessage.startsWith("**New Story Submission")):E,i=a?s.filter(e=>e.lastMessage.startsWith("**New Story Submission")):M;r(t),O(i),H(!1),es(!1)},e=>{console.error("Error fetching conversations:",e),r(E),O(M),H(!1),es(!1)});return()=>a()},[e]),(0,t.useEffect)(()=>{let e=()=>{};if("messages"===B&&(null==b?void 0:b.id)){if(b.id.startsWith("mock-convo-"))return void z(F[b.id]||[]);$(!0);let s=(0,C.P)((0,C.rJ)(D.db,"conversations",b.id,"messages"),(0,C.My)("timestamp","asc"));e=(0,C.aQ)(s,e=>{z(e.docs.map(e=>({...e.data(),id:e.id}))),$(!1)},e=>{console.error("Error fetching messages:",e),$(!1)})}else if("stories"===B&&(null==U?void 0:U.id)){if(U.id.startsWith("mock-story-"))return void Z(I[U.id]||[]);ea(!0);let s=(0,C.P)((0,C.rJ)(D.db,"conversations",U.id,"messages"),(0,C.My)("timestamp","asc"));e=(0,C.aQ)(s,e=>{Z(e.docs.map(e=>({...e.data(),id:e.id}))),ea(!1)},e=>{console.error("Error fetching story messages:",e),ea(!1)})}else z([]),Z([]);return()=>e()},[b,U,B]),(0,t.useEffect)(()=>{q.current&&q.current.scrollTo(0,q.current.scrollHeight)},[R,Y]);let et=async s=>{if(W(s),e&&!s.id.startsWith("mock-")&&s.unreadCounts[e.uid]>0){let r=(0,C.H9)(D.db,"conversations",s.id);await (0,C.mZ)(r,{["unreadCounts.".concat(e.uid)]:0})}},ei=async()=>{if(!K.trim()||!b||!e||P||b.id.startsWith("mock-"))return;Q(!0);let s=K.trim();T("");try{let r=(0,C.rJ)(D.db,"conversations",b.id,"messages");await (0,C.gS)(r,{text:s,senderId:e.uid,timestamp:(0,C.O5)()});let a=(0,C.H9)(D.db,"conversations",b.id),t=b.participants.find(s=>s!==e.uid),i=b.unreadCounts[t]||0;await (0,C.mZ)(a,{lastMessage:s,timestamp:(0,C.O5)(),["unreadCounts.".concat(t)]:i+1})}catch(e){console.error("Error sending message:",e),T(s)}finally{Q(!1)}},en=(0,t.useCallback)(s=>{if(!e&&s.id.startsWith("mock-"))return s.participantDetails[s.participants.find(e=>"user-uid"!==e)];if(!e)return null;let r=s.participants.find(s=>s!==e.uid);return r?s.participantDetails[r]:null},[e]),eo=(0,t.useMemo)(()=>b?en(b):null,[b,en]),el=(0,t.useMemo)(()=>U?en(U):null,[U,en]),ed=s=>{let{convos:r}=s;return(0,a.jsx)(d.F,{className:"flex-1",children:L?Array.from({length:5}).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border-b border-border",children:[(0,a.jsx)(_.E,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(_.E,{className:"h-4 w-1/2"})," ",(0,a.jsx)(_.E,{className:"h-3 w-10"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(_.E,{className:"h-4 w-3/4"})," ",(0,a.jsx)(_.E,{className:"h-5 w-5 rounded-full"})]})]})]},s)):r.map(s=>{var r;let t=en(s);if(!t)return null;let i=(e?s.unreadCounts[e.uid]:0)||(s.id.startsWith("mock-")?s.unreadCounts["user-uid"]:0);return(0,a.jsxs)("div",{onClick:()=>et(s),className:(0,m.cn)("flex items-start gap-3 p-4 border-b border-border cursor-pointer hover:bg-accent",(null==b?void 0:b.id)===s.id&&"bg-accent"),children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:null==t?void 0:t.avatar}),(0,a.jsx)(n.q5,{children:null==t||null==(r=t.name)?void 0:r.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-semibold truncate pr-2",children:null==t?void 0:t.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground shrink-0",children:s.timestamp?(0,S.m)(s.timestamp.toDate(),{addSuffix:!1}):""})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("p",{className:(0,m.cn)("text-sm text-muted-foreground truncate",i>0&&"text-foreground font-semibold"),children:s.lastMessage}),i>0&&(0,a.jsx)("span",{className:"ml-2 shrink-0 text-xs bg-primary text-primary-foreground rounded-full h-5 w-5 flex items-center justify-center",children:i})]})]})]},s.id)})})};return(0,a.jsx)(i.AppLayout,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[380px_1fr] h-screen",children:["messages"===B?(0,a.jsxs)("div",{className:"col-span-1 border-r border-border flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Messages"}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>G("stories"),children:(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"p-4 border-b border-border",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(l.p,{placeholder:"Search messages",className:"pl-9 bg-secondary border-secondary focus:bg-background focus:border-primary"})]})}),(0,a.jsxs)(A.tU,{defaultValue:"friends",className:"w-full flex flex-col flex-1",children:[(0,a.jsxs)(A.j7,{className:"grid w-full grid-cols-2 bg-transparent px-4 border-b border-border",children:[(0,a.jsx)(A.Xi,{value:"friends",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none",children:"Friends"}),(0,a.jsx)(A.Xi,{value:"verified",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:shadow-none rounded-none",children:"Verified Accounts"})]}),(0,a.jsx)(A.av,{value:"friends",className:"flex-1 flex flex-col",children:(0,a.jsx)(ed,{convos:s})}),(0,a.jsx)(A.av,{value:"verified",className:"flex-1 flex flex-col",children:(0,a.jsx)(ed,{convos:s})})]})]}):(0,a.jsxs)("div",{className:"col-span-1 border-r border-border flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-border flex justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"icon",className:"-ml-2",onClick:()=>G("messages"),children:(0,a.jsx)(f.A,{className:"h-5 w-5"})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"My Stories"})]})}),(0,a.jsx)("div",{className:"p-4 border-b border-border",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(l.p,{placeholder:"Search stories",className:"pl-9 bg-secondary border-secondary focus:bg-background focus:border-primary"})]})}),(0,a.jsx)(e=>{let{stories:s}=e;return(0,a.jsx)(d.F,{className:"flex-1",children:ee?Array.from({length:5}).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border-b border-border",children:[(0,a.jsx)(_.E,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(_.E,{className:"h-4 w-1/2"})," ",(0,a.jsx)(_.E,{className:"h-3 w-10"})]}),(0,a.jsx)(_.E,{className:"h-4 w-3/4"})]})]},s)):s.map(e=>{var s;let r=en(e);if(!r)return null;let t=e.lastMessage.match(/\*\*(?:New Story Submission for ")(.*?)(?:"\*\*)/),i=t?t[1]:"Untitled Story";return(0,a.jsxs)("div",{onClick:()=>{X(e)},className:(0,m.cn)("flex items-start gap-3 p-4 border-b border-border cursor-pointer hover:bg-accent",(null==U?void 0:U.id)===e.id&&"bg-accent"),children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:null==r?void 0:r.avatar}),(0,a.jsx)(n.q5,{children:null==r||null==(s=r.name)?void 0:s.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-semibold truncate pr-2",children:i}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground shrink-0",children:e.timestamp?(0,S.m)(e.timestamp.toDate(),{addSuffix:!1}):""})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:["To: ",null==r?void 0:r.name]})]})]},e.id)})})},{stories:J})]}),(0,a.jsx)("div",{className:"col-span-1 hidden md:flex flex-col h-screen",children:"messages"===B&&b&&eo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:eo.avatar}),(0,a.jsx)(n.q5,{children:eo.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:eo.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["@",eo.username]})]})]}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(h.A,{})})]}),(0,a.jsx)(d.F,{className:"flex-1 p-4 bg-secondary/20",viewportRef:q,children:V?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(p.A,{className:"h-6 w-6 animate-spin"})}):(0,a.jsx)("div",{className:"space-y-6",children:R.map(s=>(0,a.jsxs)("div",{className:(0,m.cn)("flex items-end gap-2",s.senderId===(null==e?void 0:e.uid)||null===e&&"user-uid"===s.senderId?"justify-end":"justify-start"),children:[s.senderId!==(null==e?void 0:e.uid)&&(null!==e||"user-uid"!==s.senderId)&&(0,a.jsx)(n.eu,{className:"h-8 w-8",children:(0,a.jsx)(n.BK,{src:eo.avatar})}),(0,a.jsxs)("div",{className:(0,m.cn)("rounded-lg p-3 max-w-xs lg:max-w-md shadow whitespace-pre-wrap",s.senderId===(null==e?void 0:e.uid)||null===e&&"user-uid"===s.senderId?"bg-primary text-primary-foreground rounded-br-none":"bg-secondary rounded-bl-none"),children:[(0,a.jsx)("p",{children:s.text}),(0,a.jsx)("p",{className:"text-xs text-right mt-1 opacity-70",children:s.timestamp?(0,S.m)(s.timestamp.toDate(),{addSuffix:!0}):"sending..."})]})]},s.id))})}),(0,a.jsx)("div",{className:"p-4 border-t border-border bg-background",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.T,{placeholder:"Type a message...",className:"pr-28 bg-secondary border-secondary focus:bg-background focus:border-primary resize-none",rows:1,value:K,onChange:e=>T(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ei())},disabled:P}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"icon",disabled:P,children:(0,a.jsx)(v.A,{})}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",disabled:P,children:(0,a.jsx)(g,{})}),(0,a.jsx)(o.$,{size:"icon",className:"h-8 w-8",onClick:ei,disabled:P||!K.trim(),children:P?(0,a.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(j,{className:"h-4 w-4"})})]})]})})]}):"stories"===B&&U&&el?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:el.avatar}),(0,a.jsx)(n.q5,{children:el.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold",children:["Submission to: ",el.name]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["@",el.username]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(y,{})}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(N,{})}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(h.A,{})})]})]}),(0,a.jsx)(d.F,{className:"flex-1 p-4 bg-secondary/20",viewportRef:q,children:er?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(p.A,{className:"h-6 w-6 animate-spin"})}):(0,a.jsx)("div",{className:"space-y-6",children:Y.map(e=>(0,a.jsxs)("div",{className:"rounded-lg p-4 bg-background border border-border shadow whitespace-pre-wrap",children:[(0,a.jsx)("p",{children:e.text}),(0,a.jsx)("p",{className:"text-xs text-right mt-2 text-muted-foreground",children:e.timestamp?(0,S.m)(e.timestamp.toDate(),{addSuffix:!0}):"sending..."})]},e.id))})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-muted-foreground",children:[(0,a.jsx)(w.A,{className:"h-16 w-16 mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Select a conversation"}),(0,a.jsx)("p",{children:"Choose from your existing conversations to start chatting."})]})})]})})}},7037:(e,s,r)=>{"use strict";r.d(s,{F:()=>o});var a=r(5155),t=r(2115),i=r(9034),n=r(4269);let o=t.forwardRef((e,s)=>{let{className:r,children:t,viewportRef:o,...d}=e;return(0,a.jsxs)(i.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",r),...d,children:[(0,a.jsx)(i.LM,{ref:o,className:"h-full w-full rounded-[inherit]",children:t}),(0,a.jsx)(l,{}),(0,a.jsx)(i.OK,{})]})});o.displayName=i.bL.displayName;let l=t.forwardRef((e,s)=>{let{className:r,orientation:t="vertical",...o}=e;return(0,a.jsx)(i.VM,{ref:s,orientation:t,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...o,children:(0,a.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=i.VM.displayName},7352:(e,s,r)=>{Promise.resolve().then(r.bind(r,6100))}},e=>{e.O(0,[9135,3965,5031,6900,2494,988,6434,3298,9034,6072,8441,1255,7358],()=>e(e.s=7352)),_N_E=e.O()}]);